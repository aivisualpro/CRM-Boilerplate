<script setup lang="ts">
import type { SalesDocument } from '~/composables/useSalesDocument'

const statusOptions = [
  { label: 'Draft', value: 'Draft' },
  { label: 'Sent', value: 'Sent' },
  { label: 'Paid', value: 'Paid' },
  { label: 'Overdue', value: 'Overdue' },
  { label: 'Cancelled', value: 'Cancelled' },
]

const extraFields = [
  { key: 'dueDate', label: 'Due Date', type: 'date' },
  { key: 'paidAmount', label: 'Amount Paid ($)', type: 'number', placeholder: '0' },
  { key: 'paymentMethod', label: 'Payment Method', placeholder: 'Wire Transfer, Credit Card...' },
]

const seedData: SalesDocument[] = [
  {
    id: 'i1',
    number: 'INV-2026-078',
    client: 'GlobalSoft',
    clientEmail: 'accounts@globalsoft.com',
    clientAddress: '800 Market Street, Floor 12, San Francisco, CA 94102',
    status: 'Paid',
    date: '2026-01-15',
    dueDate: '2026-02-15',
    paidAmount: 68843.25,
    paymentMethod: 'Wire Transfer',
    notes: 'Payment received Feb 10. Bank reference: WR-2026-88341.',
    lineItems: [
      { id: 'li1', description: 'ERP Platform License (Annual, 25 seats)', quantity: 25, unitPrice: 1800, discount: 5, tax: 8.5 },
      { id: 'li2', description: 'Inventory Management Module', quantity: 1, unitPrice: 8500, discount: 0, tax: 8.5 },
      { id: 'li3', description: 'Financial Reporting Add-on', quantity: 1, unitPrice: 5200, discount: 0, tax: 8.5 },
      { id: 'li4', description: 'Implementation Consulting (40 hrs)', quantity: 40, unitPrice: 175, discount: 0, tax: 8.5 },
    ],
    subtotal: 63450,
    taxTotal: 5393.25,
    discountTotal: 2250,
    total: 68843.25,
    createdAt: '2026-01-15T09:00:00Z',
  },
  {
    id: 'i2',
    number: 'INV-2026-079',
    client: 'TechVision Inc',
    clientEmail: 'ap@techvision.com',
    clientAddress: '1200 Innovation Blvd, San Jose, CA 95134',
    status: 'Sent',
    date: '2026-02-01',
    dueDate: '2026-03-01',
    paidAmount: 50000,
    paymentMethod: '',
    notes: 'Partial payment of $50,000 received. Balance due by March 1.',
    lineItems: [
      { id: 'li5', description: 'Enterprise CRM License (50 seats, Annual)', quantity: 50, unitPrice: 1200, discount: 10, tax: 8.5 },
      { id: 'li6', description: 'Data Migration & Setup', quantity: 1, unitPrice: 15000, discount: 0, tax: 8.5 },
      { id: 'li7', description: 'Custom API Integration (3 systems)', quantity: 3, unitPrice: 8500, discount: 5, tax: 8.5 },
      { id: 'li8', description: 'Staff Training (On-site, 3 days)', quantity: 2, unitPrice: 4500, discount: 0, tax: 8.5 },
      { id: 'li9', description: '24/7 Premium Support (Annual)', quantity: 1, unitPrice: 12000, discount: 15, tax: 8.5 },
    ],
    subtotal: 108225,
    taxTotal: 9199.13,
    discountTotal: 14775,
    total: 117424.13,
    createdAt: '2026-02-01T11:00:00Z',
  },
  {
    id: 'i3',
    number: 'INV-2026-080',
    client: 'NexGen Solutions',
    clientEmail: 'billing@nexgensolutions.io',
    clientAddress: '2100 Greenway Plaza, Suite 800, Houston, TX 77046',
    status: 'Overdue',
    date: '2026-01-05',
    dueDate: '2026-02-05',
    paidAmount: 0,
    paymentMethod: '',
    notes: 'Payment overdue. Second reminder sent Feb 10. Escalation pending.',
    lineItems: [
      { id: 'li10', description: 'Platform License Q1 Installment', quantity: 1, unitPrice: 22500, discount: 0, tax: 8.25 },
      { id: 'li11', description: 'Managed Hosting (Monthly)', quantity: 3, unitPrice: 3500, discount: 0, tax: 8.25 },
    ],
    subtotal: 33000,
    taxTotal: 2722.50,
    discountTotal: 0,
    total: 35722.50,
    createdAt: '2026-01-05T08:30:00Z',
  },
  {
    id: 'i4',
    number: 'INV-2026-081',
    client: 'DataFlow AI',
    clientEmail: 'finance@dataflowai.com',
    clientAddress: '300 Broad Street, Stamford, CT 06901',
    status: 'Paid',
    date: '2026-01-20',
    dueDate: '2026-02-04',
    paidAmount: 10741.35,
    paymentMethod: 'Credit Card',
    notes: 'Paid in full via corporate card. Thank you!',
    lineItems: [
      { id: 'li12', description: 'Startup Plan (5 seats, Annual)', quantity: 5, unitPrice: 480, discount: 0, tax: 6.35 },
      { id: 'li13', description: 'AI Analytics Add-on', quantity: 1, unitPrice: 6500, discount: 0, tax: 6.35 },
      { id: 'li14', description: 'Video Training Package', quantity: 1, unitPrice: 1200, discount: 0, tax: 6.35 },
    ],
    subtotal: 10100,
    taxTotal: 641.35,
    discountTotal: 0,
    total: 10741.35,
    createdAt: '2026-01-20T14:00:00Z',
  },
  {
    id: 'i5',
    number: 'INV-2026-082',
    client: 'Meridian Corp',
    clientEmail: 'accounting@meridiancorp.com',
    clientAddress: '456 Oak Drive, Austin, TX 78701',
    status: 'Sent',
    date: '2026-02-10',
    dueDate: '2026-03-10',
    paidAmount: 0,
    paymentMethod: '',
    notes: 'Net 30. Invoice sent via email to accounting department.',
    lineItems: [
      { id: 'li15', description: 'CRM Professional (15 seats, Annual)', quantity: 15, unitPrice: 960, discount: 5, tax: 8.25 },
      { id: 'li16', description: 'Sales Forecasting Module', quantity: 1, unitPrice: 4800, discount: 0, tax: 8.25 },
      { id: 'li17', description: 'Custom Report Builder', quantity: 1, unitPrice: 3600, discount: 0, tax: 8.25 },
      { id: 'li18', description: 'Remote Setup & Training (16 hrs)', quantity: 16, unitPrice: 150, discount: 0, tax: 8.25 },
    ],
    subtotal: 25080,
    taxTotal: 2069.10,
    discountTotal: 720,
    total: 27149.10,
    createdAt: '2026-02-10T10:00:00Z',
  },
  {
    id: 'i6',
    number: 'INV-2026-083',
    client: 'CloudNine Tech',
    clientEmail: 'ap@cloudninetech.com',
    clientAddress: '500 W Madison St, Chicago, IL 60661',
    status: 'Paid',
    date: '2026-01-28',
    dueDate: '2026-02-28',
    paidAmount: 23870,
    paymentMethod: 'ACH Transfer',
    notes: 'Paid ahead of schedule. Loyalty discount applied.',
    lineItems: [
      { id: 'li19', description: 'Cloud Hosting Premium (Annual)', quantity: 1, unitPrice: 18000, discount: 10, tax: 10.25 },
      { id: 'li20', description: 'SSL Certificate & Security Pack', quantity: 1, unitPrice: 2800, discount: 0, tax: 10.25 },
      { id: 'li21', description: 'Domain Management (5 domains)', quantity: 5, unitPrice: 120, discount: 0, tax: 10.25 },
    ],
    subtotal: 19000,
    taxTotal: 1947.50,
    discountTotal: 1800,
    total: 20947.50,
    createdAt: '2026-01-28T12:00:00Z',
  },
  {
    id: 'i7',
    number: 'INV-2026-084',
    client: 'Apex Group',
    clientEmail: 'billing@apexgroup.com',
    clientAddress: '777 Third Avenue, New York, NY 10017',
    status: 'Draft',
    date: '2026-02-12',
    dueDate: '2026-03-12',
    paidAmount: 0,
    paymentMethod: '',
    notes: 'Pending approval from sales director before sending.',
    lineItems: [
      { id: 'li22', description: 'Enterprise Suite (75 seats)', quantity: 75, unitPrice: 1500, discount: 12, tax: 8.875 },
      { id: 'li23', description: 'Dedicated Account Manager (Annual)', quantity: 1, unitPrice: 24000, discount: 0, tax: 8.875 },
      { id: 'li24', description: 'Priority SLA (99.99% uptime)', quantity: 1, unitPrice: 15000, discount: 5, tax: 8.875 },
      { id: 'li25', description: 'Quarterly Business Reviews', quantity: 4, unitPrice: 2000, discount: 0, tax: 8.875 },
    ],
    subtotal: 149750,
    taxTotal: 13290.31,
    discountTotal: 14250,
    total: 163040.31,
    createdAt: '2026-02-12T16:30:00Z',
  },
  {
    id: 'i8',
    number: 'INV-2026-085',
    client: 'Zenith Systems',
    clientEmail: 'pay@zenithsys.com',
    clientAddress: '1500 NE Irving St, Portland, OR 97232',
    status: 'Overdue',
    date: '2026-01-01',
    dueDate: '2026-01-31',
    paidAmount: 0,
    paymentMethod: '',
    notes: 'Third overdue notice sent. Collections review meeting scheduled.',
    lineItems: [
      { id: 'li26', description: 'Platform Renewal (Annual)', quantity: 1, unitPrice: 36000, discount: 0, tax: 0 },
      { id: 'li27', description: 'Additional Storage (500GB)', quantity: 1, unitPrice: 4800, discount: 0, tax: 0 },
      { id: 'li28', description: 'API Rate Limit Upgrade', quantity: 1, unitPrice: 2400, discount: 0, tax: 0 },
    ],
    subtotal: 43200,
    taxTotal: 0,
    discountTotal: 0,
    total: 43200,
    createdAt: '2026-01-01T06:00:00Z',
  },
]
</script>

<template>
  <SalesDocumentPage
    store-key="sales-invoices-v2"
    doc-type="Invoice"
    title="Invoices"
    description="Generate, send, and track invoices with payment reminders"
    icon="i-lucide-receipt"
    :status-options="statusOptions"
    :extra-fields="extraFields"
    :initial-data="seedData"
  />
</template>
